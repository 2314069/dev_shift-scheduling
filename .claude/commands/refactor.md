---
description: リファクタリングフロー。コードの品質改善を安全に実行する。機能は変えずに内部構造を改善する。
argument-hint: <リファクタリング対象と改善したい点>
---

# /refactor - リファクタリングコマンド

## 目的

既存コードの内部品質を改善するワークフローを実行します。
外部から見た機能は変えずに、保守性・可読性・パフォーマンスを向上させます。

## ワークフロー

```
┌─────────────────────────────────────────────────────────────┐
│  Phase 1: 分析                                              │
│  Orchestrator + Reviewer が現状を分析                       │
├─────────────────────────────────────────────────────────────┤
│  Phase 2: 計画                                              │
│  Planner がリファクタリング計画を策定                        │
├─────────────────────────────────────────────────────────────┤
│  Phase 3: テスト確認                                        │
│  Tester が既存テストの網羅性を確認、不足分を追加             │
├─────────────────────────────────────────────────────────────┤
│  Phase 4: リファクタリング実行                               │
│  Worker が段階的に実施                                       │
├─────────────────────────────────────────────────────────────┤
│  Phase 5: 検証                                              │
│  Tester がリグレッションテスト                               │
├─────────────────────────────────────────────────────────────┤
│  Phase 6: レビュー                                          │
│  Reviewer が改善を確認                                       │
└─────────────────────────────────────────────────────────────┘
```

## リファクタリングの原則

### やるべきこと
- 小さなステップで進める
- 各ステップ後にテスト実行
- 機能を変えない
- テストを先に充実させる

### やってはいけないこと
- 機能追加と同時に行う
- テストなしで大規模変更
- 一度に複数箇所を変更
- 動作確認せずに進める

## 関連コマンド

- `/develop` - 機能開発フロー
- `/fix` - バグ修正フロー
- `/improve` - システム改善フロー
